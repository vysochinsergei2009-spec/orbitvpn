# OrbitVPN Manager –¥–ª—è macOS

–ù–∞—Ç–∏–≤–Ω–æ–µ macOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è OrbitVPN Telegram –±–æ—Ç–æ–º –Ω–∞ Swift + SwiftUI.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
mac/
‚îú‚îÄ‚îÄ OrbitVPNManager/           # Swift –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ Models/                 # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ Views/                  # SwiftUI —ç–∫—Ä–∞–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ Services/               # API —Å–µ—Ä–≤–∏—Å—ã –∏ Backend –º–µ–Ω–µ–¥–∂–µ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ Resources/              # –†–µ—Å—É—Ä—Å—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ backend/                    # Python FastAPI backend (–∫–æ–ø–∏—è manager/)
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- **macOS**: 13.0+ (Ventura –∏–ª–∏ –Ω–æ–≤–µ–µ)
- **Xcode**: 15.0+
- **Python**: 3.10+
- **pip**: –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤ Python

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
# Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ)
cd backend
pip3 install -r ../requirements.txt
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –®–∞–≥ 1: –û—Ç–∫—Ä—ã—Ç—å –≤ Xcode

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Xcode**
2. File ‚Üí Open ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –ø–∞–ø–∫—É `mac/OrbitVPNManager/`
3. Xcode –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –ø—Ä–æ–µ–∫—Ç

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Backend

–ë—ç–∫–µ–Ω–¥ —É–∂–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ `mac/backend/`. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:

```bash
# –§–∞–π–ª .env –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ orbitvpn/
# Backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥–µ—Ç –µ–≥–æ
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

1. –í Xcode –≤—ã–±–µ—Ä–∏—Ç–µ —Å—Ö–µ–º—É **OrbitVPNManager**
2. –ù–∞–∂–º–∏—Ç–µ **‚åò + R** –∏–ª–∏ –∫–Ω–æ–ø–∫—É **Play**
3. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç Python backend –Ω–∞ `http://localhost:8080`

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### üìä Dashboard
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- Uptime –∏ –∑–¥–æ—Ä–æ–≤—å–µ —Å–∏—Å—Ç–µ–º—ã

### üñ•Ô∏è Services
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ (Telegram Bot, Marzban, Redis, PostgreSQL)
- Start / Stop / Restart
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ CPU –∏ RAM
- –ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–≤

### üë• Users
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏
- –ü—Ä–æ–±–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- –ù–æ–≤—ã–µ –∑–∞ —Å–µ–≥–æ–¥–Ω—è

### üåê Servers (Marzban)
- –°–ø–∏—Å–æ–∫ Marzban –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- –°—Ç–∞—Ç—É—Å –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–µ—Ä–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–¥ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –¢—Ä–∞—Ñ—Ñ–∏–∫ –ø–æ —Å–µ—Ä–≤–µ—Ä–∞–º

### üì¢ Broadcast
- –†–∞—Å—Å—ã–ª–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- –í—ã–±–æ—Ä —Ü–µ–ª–µ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏ (–≤—Å–µ / —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏)
- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–æ–±—â–µ–Ω–∏—è

### üìã Logs
- –õ–æ–≥–∏ Python backend –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É (stdout / stderr)
- –ü–æ–∏—Å–∫ –ø–æ –ª–æ–≥–∞–º
- –ê–≤—Ç–æ-—Å–∫—Ä–æ–ª–ª
- –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤

### ‚öôÔ∏è Settings
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ backend URL
- –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ backend
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- –°–±—Ä–æ—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫

## Backend API

Backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –Ω–∞ –ø–æ—Ä—Ç—É **8080**.

### –î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

```
GET  /api/status                    # –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
GET  /api/services                  # –°–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
POST /api/services/{name}/start     # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å
POST /api/services/{name}/stop      # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å
POST /api/services/{name}/restart   # –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å
GET  /api/users/stats              # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
GET  /api/marzban/instances        # Marzban –∏–Ω—Å—Ç–∞–Ω—Å—ã
GET  /api/marzban/instances/{id}   # –î–µ—Ç–∞–ª–∏ –∏–Ω—Å—Ç–∞–Ω—Å–∞
GET  /api/metrics/history          # –ò—Å—Ç–æ—Ä–∏—è –º–µ—Ç—Ä–∏–∫
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Swift –ø—Ä–æ–µ–∫—Ç–∞

```swift
// –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
OrbitVPNManagerApp.swift

// –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
Models/Models.swift

// –°–µ—Ä–≤–∏—Å—ã
Services/
‚îú‚îÄ‚îÄ APIService.swift        // HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è API
‚îî‚îÄ‚îÄ BackendManager.swift    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Python –ø—Ä–æ—Ü–µ—Å—Å–æ–º

// Views
Views/
‚îú‚îÄ‚îÄ ContentView.swift       // –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω —Å —Å–∞–π–¥–±–∞—Ä–æ–º
‚îú‚îÄ‚îÄ DashboardView.swift     // Dashboard
‚îú‚îÄ‚îÄ ServicesView.swift      // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏
‚îú‚îÄ‚îÄ UsersView.swift         // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
‚îú‚îÄ‚îÄ MarzbanView.swift       // Marzban —Å–µ—Ä–≤–µ—Ä—ã
‚îú‚îÄ‚îÄ BroadcastView.swift     // –†–∞—Å—Å—ã–ª–∫–∏
‚îú‚îÄ‚îÄ LogsView.swift          // –õ–æ–≥–∏
‚îî‚îÄ‚îÄ SettingsView.swift      // –ù–∞—Å—Ç—Ä–æ–π–∫–∏
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Swift —Ñ–∞–π–ª –≤ `Views/`
2. –î–æ–±–∞–≤—å—Ç–µ NavigationLink –≤ `ContentView.swift`:

```swift
NavigationLink(tag: 7, selection: $selectedTab) {
    MyNewView()
} label: {
    Label("My Feature", systemImage: "star.fill")
}
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

1. –î–æ–±–∞–≤—å—Ç–µ –º–µ—Ç–æ–¥ –≤ `APIService.swift`:

```swift
func fetchMyData() async throws -> MyDataType {
    return try await request("/api/my-endpoint")
}
```

2. –í—ã–∑–æ–≤–∏—Ç–µ –∏–∑ View:

```swift
let data = try await apiService.fetchMyData()
```

## –°–±–æ—Ä–∫–∞ –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è

### –°–æ–∑–¥–∞—Ç—å .app —Ñ–∞–π–ª:

1. –í Xcode: Product ‚Üí Archive
2. Distribute App ‚Üí Copy App
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ `.app` —Ñ–∞–π–ª

### –ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ (–¥–ª—è App Store):

```bash
# –í Xcode:
# 1. Signing & Capabilities
# 2. –í—ã–±–µ—Ä–∏—Ç–µ Team
# 3. Bundle Identifier: com.orbitvpn.manager
```

## Troubleshooting

### Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Python:
which python3

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ uvicorn:
pip3 install uvicorn

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ backend –≤—Ä—É—á–Ω—É—é:
cd backend
python3 -m uvicorn manager.web.app:create_app --factory --host 127.0.0.1 --port 8080
```

### –ù–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ API

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω: `http://localhost:8080/api/status`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –≤ Settings
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Logs tab

### Xcode –ø—Ä–æ–±–ª–µ–º—ã

```bash
# –û—á–∏—Å—Ç–∏—Ç—å build cache:
‚åò + Shift + K

# –û—á–∏—Å—Ç–∏—Ç—å derived data:
‚åò + Shift + Option + K
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

Proprietary - OrbitVPN Project
