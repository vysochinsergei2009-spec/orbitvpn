# OrbitVPN Manager Configuration

services:
  telegram_bot:
    enabled: true
    restart_policy: always  # always, on-failure, never
    max_restarts: 5
    restart_delay: 10  # seconds
    health_check_interval: 30
    health_check_timeout: 10
    health_check_retries: 3

  marzban_monitor:
    enabled: true
    check_interval: 60
    auto_detect_instances: true
    load_balance_check: true

  redis:
    enabled: true
    health_check_interval: 30
    max_latency_ms: 100
    check_memory: true

  postgres:
    enabled: true
    health_check_interval: 60
    check_connections: true
    slow_query_threshold: 1000  # ms

monitoring:
  web_dashboard:
    enabled: true
    host: "0.0.0.0"
    port: 8080
    auth_enabled: true
    # Generate secret key with: python -c "import secrets; print(secrets.token_hex(32))"
    secret_key: ""
    # Admin users (username: password_hash)
    # Generate hash with: python -c "import hashlib; print(hashlib.sha256(b'your_password').hexdigest())"
    admin_users:
      admin: "8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918"  # Default: admin

  alerts:
    telegram_enabled: false  # Set to true to enable Telegram alerts
    admin_chat_ids: []  # Add admin Telegram IDs
    alert_levels:
      - critical
      - error
    min_interval: 300  # Minimum seconds between same alert

  metrics:
    prometheus_export: false
    prometheus_port: 9090
    retention_days: 7
    collect_interval: 10  # seconds

logging:
  level: INFO  # DEBUG, INFO, WARNING, ERROR
  format: json  # json or text
  max_size_mb: 100
  backup_count: 5
